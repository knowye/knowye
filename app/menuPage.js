/*
 * JS for menuPage generated by Appery.io
 */
Apperyio.getProjectGUID = function() {
    return '6f6b5cb3-e481-4b12-be3f-dd8cecd1ca07';
};

function navigateTo(outcome, useAjax) {
    Apperyio.navigateTo(outcome, useAjax);
}

function adjustContentHeight() {
    Apperyio.adjustContentHeightWithPadding();
}

function adjustContentHeightWithPadding(_page) {
    Apperyio.adjustContentHeightWithPadding(_page);
}

function setDetailContent(pageUrl) {
    Apperyio.setDetailContent(pageUrl);
}
Apperyio.AppPages = [{
    "name": "searchResultsPage",
    "location": "searchResultsPage.html"
}, {
    "name": "navigateProprietorPage",
    "location": "navigateProprietorPage.html"
}, {
    "name": "createAccount",
    "location": "createAccount.html"
}, {
    "name": "menuHeadingManagePage",
    "location": "menuHeadingManagePage.html"
}, {
    "name": "easterEggPage",
    "location": "easterEggPage.html"
}, {
    "name": "faqPage",
    "location": "faqPage.html"
}, {
    "name": "orderHistoryPage",
    "location": "orderHistoryPage.html"
}, {
    "name": "selectedPage",
    "location": "selectedPage.html"
}, {
    "name": "tocPage",
    "location": "tocPage.html"
}, {
    "name": "menuPreviewPage",
    "location": "menuPreviewPage.html"
}, {
    "name": "itemDetailsPage",
    "location": "itemDetailsPage.html"
}, {
    "name": "aboutPage",
    "location": "aboutPage.html"
}, {
    "name": "proprietorPage",
    "location": "proprietorPage.html"
}, {
    "name": "itemPage",
    "location": "itemPage.html"
}, {
    "name": "searchCriteria",
    "location": "searchCriteria.html"
}, {
    "name": "searchPage",
    "location": "searchPage.html"
}, {
    "name": "startScreen",
    "location": "startScreen.html"
}, {
    "name": "helpPage",
    "location": "helpPage.html"
}, {
    "name": "logoutPage",
    "location": "logoutPage.html"
}, {
    "name": "navigatePage",
    "location": "navigatePage.html"
}, {
    "name": "profilePage",
    "location": "profilePage.html"
}, {
    "name": "filterPage",
    "location": "filterPage.html"
}, {
    "name": "settingsPage",
    "location": "settingsPage.html"
}, {
    "name": "favoritesPage",
    "location": "favoritesPage.html"
}, {
    "name": "menuManagementPage",
    "location": "menuManagementPage.html"
}, {
    "name": "menuPage",
    "location": "menuPage.html"
}, {
    "name": "wishListPage",
    "location": "wishListPage.html"
}, {
    "name": "themeSample",
    "location": "themeSample.html"
}, {
    "name": "proprietorStartPage",
    "location": "proprietorStartPage.html"
}, {
    "name": "itemManagePage",
    "location": "itemManagePage.html"
}, {
    "name": "operationsRestaurantPage",
    "location": "operationsRestaurantPage.html"
}, {
    "name": "itemEditPage",
    "location": "itemEditPage.html"
}, {
    "name": "alertPage",
    "location": "alertPage.html"
}, {
    "name": "itemInventoryPage",
    "location": "itemInventoryPage.html"
}, {
    "name": "detailedReviewPage",
    "location": "detailedReviewPage.html"
}, {
    "name": "menuPage_old",
    "location": "menuPage_old.html"
}, {
    "name": "proprietorStatPage",
    "location": "proprietorStatPage.html"
}, {
    "name": "ratingInfoPage",
    "location": "ratingInfoPage.html"
}, {
    "name": "scannerPage",
    "location": "scannerPage.html"
}, {
    "name": "qrCodePage",
    "location": "qrCodePage.html"
}, {
    "name": "timeRangePage",
    "location": "timeRangePage.html"
}, {
    "name": "menuHistoryPage",
    "location": "menuHistoryPage.html"
}, {
    "name": "dinnerDrilldownSample",
    "location": "dinnerDrilldownSample.html"
}, {
    "name": "CSStestPage",
    "location": "CSStestPage.html"
}, {
    "name": "selectionHistoryPage",
    "location": "selectionHistoryPage.html"
}, {
    "name": "operationPrivateChefPage",
    "location": "operationPrivateChefPage.html"
}];

function menuPage_js() {
    /* Object & array with components "name-to-id" mapping */
    var n2id_buf = {
        'navigateButton': 'menuPage_navigateButton',
        'profileSearchGrid': 'menuPage_profileSearchGrid',
        'profileLabelCell': 'menuPage_profileLabelCell',
        'profileUseLabel': 'menuPage_profileUseLabel',
        'profileToggleCell': 'menuPage_profileToggleCell',
        'profileUseToggle': 'menuPage_profileUseToggle',
        'searchLabelCell': 'menuPage_searchLabelCell',
        'searchInput': 'menuPage_searchInput',
        'searchButtonCell': 'menuPage_searchButtonCell',
        'searchMenuButton': 'menuPage_searchMenuButton',
        'collapseExpandButton': 'menuPage_collapseExpandButton',
        'menuTagLine': 'menuPage_menuTagLine',
        'menuList': 'menuPage_menuList',
        'headingItem': 'menuPage_headingItem',
        'menuHeadingName': 'menuPage_menuHeadingName',
        'mobilelistitembutton_38': 'menuPage_mobilelistitembutton_38',
        'menuHeadingDescription': 'menuPage_menuHeadingDescription',
        'priceRatingGrid': 'menuPage_priceRatingGrid',
        'priceCell': 'menuPage_priceCell',
        'priceGrid': 'menuPage_priceGrid',
        'dollarSignCell': 'menuPage_dollarSignCell',
        'dollarSignLabel': 'menuPage_dollarSignLabel',
        'priceAmountCell': 'menuPage_priceAmountCell',
        'priceAmountLabel': 'menuPage_priceAmountLabel',
        'ratingCell': 'menuPage_ratingCell',
        'selectItemButton': 'menuPage_selectItemButton',
        'addWishListButton': 'menuPage_addWishListButton',
        'unavailableLabel': 'menuPage_unavailableLabel',
        'footerGrid': 'menuPage_footerGrid',
        'selectedCell': 'menuPage_selectedCell',
        'selectedButton': 'menuPage_selectedButton',
        'callServerCell': 'menuPage_callServerCell',
        'callServerButton': 'menuPage_callServerButton',
        'ownerInfoCell': 'menuPage_ownerInfoCell',
        'ownerInfoButton': 'menuPage_ownerInfoButton',
        'categoryAddLabel': 'menuPage_categoryAddLabel',
        'headingAddField': 'menuPage_headingAddField',
        'headerDescriptionField': 'menuPage_headerDescriptionField',
        'categoryParentLabel': 'menuPage_categoryParentLabel',
        'headingExampleLabel1': 'menuPage_headingExampleLabel1',
        'headingExampleLabel2': 'menuPage_headingExampleLabel2',
        'headingExampleLabel3': 'menuPage_headingExampleLabel3',
        'headingParentSelect': 'menuPage_headingParentSelect',
        'headingParentSelect-0': 'menuPage_headingParentSelect-0',
        'headingAddSaveButton': 'menuPage_headingAddSaveButton',
        'categoryEditLabel': 'menuPage_categoryEditLabel',
        'mobiletextinput_22': 'menuPage_mobiletextinput_22',
        'categoryParentEditLabel': 'menuPage_categoryParentEditLabel',
        'categoryParentEditButton': 'menuPage_categoryParentEditButton',
        'categoryParentEditButton-0': 'menuPage_categoryParentEditButton-0',
        'categoryEditSaveButton': 'menuPage_categoryEditSaveButton',
        'itemIsInOrderLabel': 'menuPage_itemIsInOrderLabel',
        'addtoOrderLabel': 'menuPage_addtoOrderLabel',
        'labelStandard': 'menuPage_labelStandard',
        'wishListNote': 'menuPage_wishListNote',
        'closePopupButton': 'menuPage_closePopupButton',
        'wishlistConfirmLabel': 'menuPage_wishlistConfirmLabel',
        'wishListContainsItemLabel': 'menuPage_wishListContainsItemLabel'
    };
    if ("n2id" in window && window.n2id !== undefined) {
        $.extend(n2id, n2id_buf);
    } else {
        window.n2id = n2id_buf;
    }
    /*
     * Nonvisual components
     */
    Apperyio.mappings = Apperyio.mappings || {};
    Apperyio.mappings["menuPage_menuPage_onload_mapping_3"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "from_name": "currentVendor",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage",
                "to_type": "UI",
                "mappings": [
                    {
                        "source": "$['menuTagLine']",
                        "target_transformation": function(value, element) {
                            return value || "";
                        },
                        "target": "$['menuTagLine:text']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_list_service_onsuccess_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "from_name": "menuPage_list_service",
                "from_type": "SERVICE_RESPONSE",
                "to_name": "menuHeading",
                "to_type": "SESSION_STORAGE",
                "mappings": [
                    {
                        "source": "$['body'][i]['headingParent']['_id']",
                        "target": "$[i]['parent_id']"
                    },
                    {
                        "source": "$['body'][i]['_id']",
                        "target": "$[i]['id']"
                    },
                    {
                        "source": "$['body'][i]['heading']",
                        "target": "$[i]['heading']"
                    },
                    {
                        "source": "$['body'][i]['headingDescription']",
                        "target": "$[i]['description']"
                    },
                    {
                        "source": "$['body'][i]['order']",
                        "target": "$[i]['order']"
                    },
                    {
                        "source": "$['body'][i]['price']",
                        "target": "$[i]['price']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_list_service_onsuccess_mapping_2"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "from_name": "menuHierarchyList",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage",
                "to_type": "UI",
                "mappings": [
                    {
                        "source": "$[i]",
                        "target_transformation": function(value, element) {
                            element.prop('item_id', value.id);
                            //console.log(JSON.stringify(value));
                            //console.log(element);
                        },
                        "target": "$['headingItem']"
                    },
                    {
                        "source": "$[i]['visible']",
                        "target": "$['headingItem:visible']"
                    },
                    {
                        "source": "$[i]['heading']",
                        "target": "$['headingItem:text']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_list_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "to_name": "menuPage_list_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}"
                    },
                    "parameters": {
                        "include": "vendor,vendor.state,vendor.country,headingParent,headingParent.vendor,headingParent.vendor.state,headingParent.vendor.country,headingParent.headingParent,headingParent.headingParent.vendor,headingParent.headingParent.vendor.state,headingParent.headingParent.vendor.country,headingParent.headingParent.headingParent,headingParent.headingParent.headingParent.vendor,headingParent.headingParent.headingParent.vendor.state,headingParent.headingParent.headingParent.vendor.country,headingParent.headingParent.headingParent.headingParent,headingParent.headingParent.headingParent.headingParent.vendor,headingParent.headingParent.headingParent.headingParent.headingParent",
                        "sort": "order",
                        "where": " {\"vendor\": {\"$inQuery\" : { \"_id\": \"{vendor_id}\"}}}",
                        "limit": "1500"
                    },
                    "body": null
                },
                "mappings": []
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_genericMapService_onsuccess_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "from_name": "menuHierarchyList",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage",
                "to_type": "UI",
                "mappings": [
                    {
                        "source": "$[i]",
                        "target_transformation": function(value, element) {
                            return mapMenuItem(value, element);
                        },
                        "target": "$['headingItem']"
                    },
                    {
                        "source": "$[i]['description']",
                        "target_transformation": function(value, element) {
                            return value || '';
                        },
                        "target": "$['headingItem']['menuHeadingDescription:text']"
                    },
                    {
                        "source": "$[i]['visible']",
                        "target": "$['headingItem:visible']"
                    },
                    {
                        "source": "$[i]['isItem']",
                        "target": "$['headingItem']['priceRatingGrid:visible']"
                    },
                    {
                        "source": "$[i]['price']",
                        "target_transformation": function(value, element) {
                            if (value) {
                                return value.toFixed(2);
                            } else {
                                return "";
                            }
                        },
                        "target": "$['headingItem']['priceAmountLabel:text']"
                    },
                    {
                        "source": "$[i]['isHidden']",
                        "target_transformation": function(value, element) {
                            return !value;
                        },
                        "target": "$['headingItem']['selectItemButton:visible']"
                    },
                    {
                        "source": "$[i]['isHidden']",
                        "target": "$['headingItem']['unavailableLabel:visible']"
                    },
                    {
                        "source": "$[i]['isHidden']",
                        "target_transformation": function(value, element) {
                            return value;
                        },
                        "target": "$['headingItem']['addWishListButton:visible']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_mapService_onsuccess_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "from_name": "currentItem",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage",
                "to_type": "UI",
                "mappings": [
                    {
                        "source": "$['heading']",
                        "target": "$['headingAddField:text']"
                    },
                    {
                        "source": "$['description']",
                        "target": "$['headerDescriptionField:text']"
                    }
                ]
            },
            {
                "from_name": "menuHierarchyList",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage",
                "to_type": "UI",
                "mappings": [
                    {
                        "source": "$[i]",
                        "target": "$['headingParentSelect-0']"
                    },
                    {
                        "source": "$[i]['id']",
                        "target": "$['headingParentSelect-0:value']"
                    },
                    {
                        "source": "$[i]['heading']",
                        "target": "$['headingParentSelect-0:label']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_mapService_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "to_name": "menuPage_mapService",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "data": null
                },
                "mappings": []
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_id_item_query_service_onsuccess_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "from_name": "menuPage_id_item_query_service",
                "from_type": "SERVICE_RESPONSE",
                "to_name": "menuItemsList",
                "to_type": "SESSION_STORAGE",
                "mappings": [
                    {
                        "source": "$['body'][i]['_id']",
                        "target": "$[i]['id']"
                    },
                    {
                        "source": "$['body'][i]['name']",
                        "target": "$[i]['heading']"
                    },
                    {
                        "source": "$['body'][i]['heading']['_id']",
                        "target": "$[i]['parent_id']"
                    },
                    {
                        "source": "$['body'][i]['price']",
                        "target": "$[i]['price']"
                    },
                    {
                        "source": "$['body'][i]['order']",
                        "target": "$[i]['order']"
                    },
                    {
                        "source": "$['body'][i]['_id']",
                        "target_transformation": function(value) {
                            return true;
                        },
                        "target": "$[i]['isItem']"
                    },
                    {
                        "source": "$['body'][i]['hidden']",
                        "target": "$[i]['isHidden']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_id_item_query_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "to_name": "menuPage_id_item_query_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}"
                    },
                    "parameters": {
                        "where": " {\"vendor_lk\": {\"$inQuery\" : { \"_id\": \"{vendor_id}\"}}}",
                        "include": "cuisine_lk,ingredientMain_lk,ingredientMain_lk.category_lk,ingredientHidden_lk,ingredientHidden_lk.category_lk,ingredientFeatured_lk,ingredientFeatured_lk.category_lk,rating_lk,rating_lk.item,rating_lk.item.cuisine_lk,rating_lk.item.ingredientMain_lk,rating_lk.item.ingredientMain_lk.category_lk,rating_lk.item.ingredientHidden_lk,rating_lk.item.ingredientFeatured_lk,rating_lk.item.rating_lk,rating_lk.item.vendor_lk,rating_lk.item.heading,rating_lk.user,rating_lk.user.status,vendor_lk,vendor_lk.state,vendor_lk.country,heading,heading.vendor,heading.vendor.state,heading.vendor.country,heading.headingParent",
                        "sort": "order",
                        "limit": "1500"
                    },
                    "body": null
                },
                "mappings": [
                    {
                        "target_transformation": function(value) {
                            return {
                                "vendor_lk": {
                                    "$inQuery": {
                                        "_id": projectMdb1_settings.vendor_id
                                    }
                                }
                            };
                        },
                        "target": "$['parameters']['where']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_orderItem_create_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "from_name": "selectedItem",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_orderItem_create_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "quantity": 1,
                        "item": {
                            "collName": "item"
                        },
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "user": {
                            "callName": "_users"
                        }
                    }
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['body']['item']['_id']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_wishlist_create_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "from_name": "selectedItem",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_wishlist_create_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "item": {
                            "collName": "item"
                        },
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "user": {
                            "collName": "_users"
                        }
                    }
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['body']['item']['_id']"
                    }
                ]
            },
            {
                "from_name": "menuPage",
                "from_type": "UI",
                "to_name": "menuPage_wishlist_create_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "item": {
                            "collName": "item"
                        },
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "user": {
                            "collName": "_users"
                        }
                    }
                },
                "mappings": [
                    {
                        "source": "$['wishListNote:text']",
                        "target": "$['body']['notes']"
                    }
                ]
            },
            {
                "from_name": "userId",
                "from_type": "LOCAL_STORAGE",
                "to_name": "menuPage_wishlist_create_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "item": {
                            "collName": "item"
                        },
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "user": {
                            "collName": "_users"
                        }
                    }
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['body']['user']['_id']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_wishlist_query_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "from_name": "selectedItem",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_wishlist_query_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}"
                    },
                    "parameters": {
                        "include": "item,item.cuisine_lk,item.ingredientMain_lk,item.ingredientMain_lk.category_lk,item.ingredientHidden_lk,item.ingredientHidden_lk.category_lk,item.ingredientFeatured_lk,item.ingredientFeatured_lk.category_lk,item.rating_lk,item.rating_lk.item,item.rating_lk.item.cuisine_lk,item.rating_lk.item.ingredientMain_lk,item.rating_lk.item.ingredientHidden_lk,item.rating_lk.item.ingredientFeatured_lk,item.rating_lk.item.rating_lk,item.rating_lk.item.vendor_lk,item.rating_lk.item.heading,item.rating_lk.user,item.rating_lk.user.status,item.rating_lk.user.vendor_lk,item.vendor_lk,item.vendor_lk.state,item.vendor_lk.country,item.heading,item.heading.vendor,item.heading.headingParent,item.heading.owner_lk",
                        "limit": "1500"
                    },
                    "body": null
                },
                "mappings": [
                    {
                        "source": "$",
                        "target_transformation": function(value) {
                            return {
                                "item": {
                                    "$inQuery": {
                                        "_id": value
                                    }
                                }
                            };
                        },
                        "target": "$['parameters']['where']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_getMenuHierarchy_service_onsuccess_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "from_name": "menuPage_getMenuHierarchy_service",
                "from_type": "SERVICE_RESPONSE",
                "to_name": "menuHierarchyList",
                "to_type": "SESSION_STORAGE",
                "mappings": [
                    {
                        "source": "$['body'][i]['_id']",
                        "target": "$[i]['id']"
                    },
                    {
                        "source": "$['body'][i]['price']",
                        "target": "$[i]['price']"
                    },
                    {
                        "source": "$['body'][i]['level']",
                        "target": "$[i]['level']"
                    },
                    {
                        "source": "$['body'][i]['opened']",
                        "target": "$[i]['opened']"
                    },
                    {
                        "source": "$['body'][i]['description']",
                        "target": "$[i]['description']"
                    },
                    {
                        "source": "$['body'][i]['heading']",
                        "target": "$[i]['heading']"
                    },
                    {
                        "source": "$['body'][i]['visible']",
                        "target": "$[i]['visible']"
                    },
                    {
                        "source": "$['body'][i]['parent']['_id']",
                        "target": "$[i]['parent_id']"
                    },
                    {
                        "source": "$['body'][i]['hidden']",
                        "target": "$[i]['isHidden']"
                    },
                    {
                        "source": "$['body'][i]['isItem']",
                        "target": "$[i]['isItem']"
                    },
                    {
                        "source": "$['body'][i]['order']",
                        "target": "$[i]['order']"
                    },
                    {
                        "source": "$['body'][i]['hasChildren']",
                        "target": "$[i]['hasChildren']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_getMenuHierarchy_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "from_name": "vendorId",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_getMenuHierarchy_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "Content-Type": "text/plain"
                    },
                    "parameters": {
                        "vendorId": "{vendor_id}",
                        "onlyHeading": "false"
                    },
                    "body": null
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['parameters']['vendorId']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_menuPage_createSelected_service_onsuccess_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": []
    };
    Apperyio.mappings["menuPage_menuPage_createSelected_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage",
        "directions": [
            {
                "from_name": "currentItem",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_createSelected_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "itemID": {
                            "collName": "item"
                        },
                        "current": true,
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "userID": {
                            "collName": "_users"
                        },
                        "vendor_lk": {
                            "collName": "vendor"
                        }
                    }
                },
                "mappings": [
                    {
                        "source": "$['id']",
                        "target": "$['body']['itemID']['_id']"
                    },
                    {
                        "source": "$['description']",
                        "target": "$['body']['itemName']"
                    }
                ]
            },
            {
                "from_name": "userId",
                "from_type": "LOCAL_STORAGE",
                "to_name": "menuPage_createSelected_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "itemID": {
                            "collName": "item"
                        },
                        "current": true,
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "userID": {
                            "collName": "_users"
                        },
                        "vendor_lk": {
                            "collName": "vendor"
                        }
                    }
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['body']['userID']['_id']"
                    }
                ]
            },
            {
                "from_name": "currentVendor",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_createSelected_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "itemID": {
                            "collName": "item"
                        },
                        "current": true,
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "userID": {
                            "collName": "_users"
                        },
                        "vendor_lk": {
                            "collName": "vendor"
                        }
                    }
                },
                "mappings": [
                    {
                        "source": "$['id']",
                        "target": "$['body']['vendor_lk']['_id']"
                    }
                ]
            },
            {
                "from_name": "sessionToken",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_createSelected_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "itemID": {
                            "collName": "item"
                        },
                        "current": true,
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "userID": {
                            "collName": "_users"
                        },
                        "vendor_lk": {
                            "collName": "vendor"
                        }
                    }
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['headers']['X-Appery-Session-Token']"
                    }
                ]
            }
        ]
    };
    Apperyio.datasources = Apperyio.datasources || {};
    window.menuPage_list_service = Apperyio.datasources.menuPage_list_service = new Apperyio.DataSource(projectMdb1_menuHeading_list_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_list_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_list_service_onsuccess_mapping_0"]);
            makeHierarchy();
            try {
                menuPage_genericMapService.execute({});
            } catch (e) {
                console.error(e);
                hideSpinner();
            };
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_genericMapService = Apperyio.datasources.menuPage_genericMapService = new Apperyio.DataSource(GenericService, {
        "onBeforeSend": function(jqXHR) {},
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_genericMapService_onsuccess_mapping_0"]);
            /*
            var scrollTo = storageGet('scrollTo');
            if(scrollTo)
            {
            	//window.scrollTo(0, scrollTo);
                $.mobile.silentScroll(scrollTo);
                //$.mobile.silentScroll(scrollTo);
            }
            storageSet('scrollTo', 0);
            */
            ;
        },
        "onError": function(jqXHR, textStatus, errorThrown) {
            showPopupWithTimout('wishlistConfirmPopup', 1000);
        }
    });
    window.menuPage_mapService = Apperyio.datasources.menuPage_mapService = new Apperyio.DataSource(mapMenuHedingItemGenericService, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_mapService_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_mapService_onsuccess_mapping_0"]);
            //console.log(currentItem);
            Apperyio("headingParentSelect").val(currentItem.parent_id).refresh();;
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_id_item_query_service = Apperyio.datasources.menuPage_id_item_query_service = new Apperyio.DataSource(projectMdb1_item_query_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_id_item_query_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_id_item_query_service_onsuccess_mapping_0"]);
            try {
                menuPage_list_service.execute({});
            } catch (e) {
                console.error(e);
                hideSpinner();
            };
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_orderItem_create_service = Apperyio.datasources.menuPage_orderItem_create_service = new Apperyio.DataSource(projectMdb1_orderItem_create_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_orderItem_create_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            showPopupWithTimout('addToOrderPopup', addToOrderPopupTime);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_wishlist_create_service = Apperyio.datasources.menuPage_wishlist_create_service = new Apperyio.DataSource(projectMdb1_wishlist_create_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_wishlist_create_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            showPopupWithTimout('wishlistConfirmPopup', wishlistConfirmPopupTime);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_wishlist_query_service = Apperyio.datasources.menuPage_wishlist_query_service = new Apperyio.DataSource(projectMdb1_wishlist_query_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_wishlist_query_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            if (!data.length) {
                Apperyio('wishListPopup').popup('open');
            } else {
                showPopupWithTimout('wishlistContainsItem', wishlistContainsItemTime);
            };
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_getMenuHierarchy_service = Apperyio.datasources.menuPage_getMenuHierarchy_service = new Apperyio.DataSource(getMenuHierarchy_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_getMenuHierarchy_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_getMenuHierarchy_service_onsuccess_mapping_0"]);
            try {
                menuPage_genericMapService.execute({});
            } catch (e) {
                console.error(e);
                hideSpinner();
            };
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_createSelected_service = Apperyio.datasources.menuPage_createSelected_service = new Apperyio.DataSource(projectMdb1_selected_create_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_createSelected_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_createSelected_service_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    Apperyio.CurrentScreen = 'menuPage';
    _.chain(Apperyio.mappings)
        .filter(function(m) {
            return m.homeScreen === Apperyio.CurrentScreen;
        })
        .each(Apperyio.UIHandler.hideTemplateComponents);
    /*
     * Events and handlers
     */
    // On Load
    var menuPage_onLoad = function() {
        menuPage_elementsExtraJS();
        try {
            menuPage_getMenuHierarchy_service.execute({});
        } catch (e) {
            console.error(e);
            hideSpinner();
        };
        Apperyio('menuFooter').addClass('fixed-header');
        Apperyio('headingManageHeader').parents('[data-role=header]').addClass('fixed-header');
        initPage();
        if (!storageGet('menuHierarchyList')) {
            //menuPage_list_service.execute({});
            menuPage_getMenuHierarchy_service.execute({});
        } else {
            menuPage_genericMapService.execute({});
        };
        Apperyio.processMappingAction(Apperyio.mappings["menuPage_menuPage_onload_mapping_3"]);
        menuPage_deviceEvents();
        menuPage_windowEvents();
        menuPage_elementsEvents();
    };
    // screen window events
    function menuPage_windowEvents() {
        $('#menuPage').bind('pageshow orientationchange', function() {
            var _page = this;
            adjustContentHeightWithPadding(_page);
        });
    };
    // device events
    function menuPage_deviceEvents() {
        document.addEventListener("deviceready", function() {
        });
    };
    // screen elements extra js
    function menuPage_elementsExtraJS() {
        // screen (menuPage) extra code
        /* profileUseToggle */
        $("#menuPage_profileUseToggle").parent().find(".ui-flipswitch-on").attr("tabindex", "2");
        /* menuList */
        listView = $("#menuPage_menuList");
        theme = listView.attr("data-theme");
        if (typeof theme !== 'undefined') {
            var themeClass = "ui-btn-up-" + theme;
            listItem = $("#menuPage_menuList .ui-li-static");
            $.each(listItem, function(index, value) {
                $(this).addClass(themeClass);
            });
        }
        /* headingItem */
        /* headingAddPopup */
        $("#menuPage_headingAddPopup").popup("option", "positionTo", "window");
        /* headingParentSelect */
        $("#menuPage_headingParentSelect").parent().find("a.ui-btn").attr("tabindex", "5");
        /* categoryEditPopup */
        $("#menuPage_categoryEditPopup").popup("option", "positionTo", "window");
        /* categoryParentEditButton */
        $("#menuPage_categoryParentEditButton").parent().find("a.ui-btn").attr("tabindex", "7");
        /* itemIsInOrderPopup */
        $("#menuPage_itemIsInOrderPopup").popup("option", "positionTo", "window");
        /* addToOrderPopup */
        $("#menuPage_addToOrderPopup").popup("option", "positionTo", "window");
        /* wishListPopup */
        $("#menuPage_wishListPopup").popup("option", "positionTo", "window");
        /* wishlistConfirmPopup */
        $("#menuPage_wishlistConfirmPopup").popup("option", "positionTo", "window");
        /* wishlistContainsItem */
        $("#menuPage_wishlistContainsItem").popup("option", "positionTo", "window");
    };
    // screen elements handler
    function menuPage_elementsEvents() {
        $(document).on("click", "a :input,a a,a fieldset label", function(event) {
            event.stopPropagation();
        });
        $(document).off("click", '#menuPage_headingManageHeader [name="navigateButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    navigateRB();
                }
            },
        }, '#menuPage_headingManageHeader [name="navigateButton"]');
        $(document).off("click", '#menuPage_menuHeadingContainer [name="collapseExpandButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    collapseExpandAll();
                    menuPage_genericMapService.execute({});
                }
            },
        }, '#menuPage_menuHeadingContainer [name="collapseExpandButton"]');
        $(document).off("click", '#menuPage_menuHeadingContainer [name="headingItem"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    onClickMenuItem(this, menuPage_genericMapService, true);
                }
            },
        }, '#menuPage_menuHeadingContainer [name="headingItem"]');
        $(document).off("click", '#menuPage_menuHeadingContainer [name="selectItemButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    var currentItem = _.findWhere(
                            storageGet('menuHierarchyList'), {
                                id: $(this).parents('li').attr('item_id')
                            }
                        ),
                        currentOrder = storageGet('currentOrder') || Apperyio.getModel('currentOrder'),
                        currentOrderItems = storageGet('currentOrderItems') || Apperyio.getModel('orderItems');
                    if (currentOrder.vendor_id !== projectMdb1_settings.vendor_id) {
                        currentOrderItems = [];
                        currentOrder.vendor_id = projectMdb1_settings.vendor_id;
                    }
                    // 
                    currentOrderItems.push({
                        id: currentOrder.items.length + '',
                        item_id: currentItem.id,
                        item_name: currentItem.heading,
                        price: currentItem.price
                    });
                    storageSet('currentOrder', currentOrder);
                    storageSet('currentOrderItems', currentOrderItems);
                    storageSet('currentItem', currentItem);
                    menuPage_createSelected_service.execute({});
                    showPopupWithTimout('addToOrderPopup');
                    //storageSet('selectedItem', $(this).parents('li')[0].item_id);
                    //menuPage_orderItem_create_service.execute({});
                    return false;
                }
            },
        }, '#menuPage_menuHeadingContainer [name="selectItemButton"]');
        $(document).off("click", '#menuPage_menuHeadingContainer [name="addWishListButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    /*
                    if(isGuest)
                    {
                    	Apperyio('loginGotoPopup').popup('open');
                    }
                    else 
                    {
                        Apperyio('wishListNote').val('');
                        storageSet('selectedItem', $(this).parents('li')[0].item_id);
                        menuPage_wishlist_query_service.execute({});
                    }
                    */
                    Apperyio('wishListNote').val('');
                    storageSet('selectedItem', $(this).parents('li').attr('item_id'));
                    menuPage_wishlist_query_service.execute({});
                    return false;
                    ;
                }
            },
        }, '#menuPage_menuHeadingContainer [name="addWishListButton"]');
        $(document).off("click", '#menuPage_menuFooter [name="selectedButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio.navigateTo('selectedPage', {
                        reverse: false
                    });
                }
            },
        }, '#menuPage_menuFooter [name="selectedButton"]');
        $(document).off("click", '#menuPage_menuFooter [name="ownerInfoButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio.navigateTo('proprietorPage', {
                        transition: 'flip',
                        reverse: false
                    });
                }
            },
        }, '#menuPage_menuFooter [name="ownerInfoButton"]');
        $(document).off("click", '#menuPage_wishListPopup [name="closePopupButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio('wishListPopup').popup('close');
                    try {
                        menuPage_wishlist_create_service.execute({});
                    } catch (e) {
                        console.error(e);
                        hideSpinner();
                    };
                }
            },
        }, '#menuPage_wishListPopup [name="closePopupButton"]');
    };
    $(document).off("pagebeforeshow", "#menuPage").on("pagebeforeshow", "#menuPage", function(event, ui) {
        Apperyio.CurrentScreen = "menuPage";
        _.chain(Apperyio.mappings)
            .filter(function(m) {
                return m.homeScreen === Apperyio.CurrentScreen;
            })
            .each(Apperyio.UIHandler.hideTemplateComponents);
    });
    menuPage_onLoad();
};
$(document).off("pagecreate", "#menuPage").on("pagecreate", "#menuPage", function(event, ui) {
    Apperyio.processSelectMenu($(this));
    menuPage_js();
});