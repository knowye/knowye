/*
 * JS for menuPage_v2 generated by Appery.io
 */
Apperyio.getProjectGUID = function() {
    return '148444cb-eb26-4cec-bc22-29bf794bc529';
};

function navigateTo(outcome, useAjax) {
    Apperyio.navigateTo(outcome, useAjax);
}

function adjustContentHeight() {
    Apperyio.adjustContentHeightWithPadding();
}

function adjustContentHeightWithPadding(_page) {
    Apperyio.adjustContentHeightWithPadding(_page);
}

function setDetailContent(pageUrl) {
    Apperyio.setDetailContent(pageUrl);
}
Apperyio.AppPages = [{
    "name": "itemPage",
    "location": "itemPage.html"
},{
    "name": "menu_shared",
    "location": "menu_shared.html"
}, {
    "name": "zzqrCodePage",
    "location": "zzqrCodePage.html"
}, {
    "name": "zzfacebookLogin",
    "location": "zzfacebookLogin.html"
}, {
    "name": "startScreen",
    "location": "startScreen.html"
}, {
    "name": "zzpromoManage",
    "location": "zzpromoManage.html"
}, {
    "name": "aboutPage",
    "location": "aboutPage.html"
}, {
    "name": "itemDetailsPage",
    "location": "itemDetailsPage.html"
}, {
    "name": "menuHeadingManagePage",
    "location": "menuHeadingManagePage.html"
}, {
    "name": "createAccount",
    "location": "createAccount.html"
}, {
    "name": "zzsettingsPage",
    "location": "zzsettingsPage.html"
}, {
    "name": "wishListPage",
    "location": "wishListPage.html"
}, {
    "name": "menuManagementPage",
    "location": "menuManagementPage.html"
}, {
    "name": "favoritesPage",
    "location": "favoritesPage.html"
}, {
    "name": "touPage",
    "location": "touPage.html"
}, {
    "name": "navigatePage",
    "location": "navigatePage.html"
}, {
    "name": "logoutPage",
    "location": "logoutPage.html"
}, {
    "name": "proprietorPage",
    "location": "proprietorPage.html"
}, {
    "name": "helpPage",
    "location": "helpPage.html"
}, {
    "name": "proprietorAnalyticsPage",
    "location": "proprietorAnalyticsPage.html"
}, {
    "name": "menuPreviewPage",
    "location": "menuPreviewPage.html"
}, {
    "name": "zzpromoEdit",
    "location": "zzpromoEdit.html"
}, {
    "name": "menuPage_v2",
    "location": "menuPage_v2.html"
}, {
    "name": "filterPage",
    "location": "filterPage.html"
}, {
    "name": "easterEggPage",
    "location": "easterEggPage.html"
}, {
    "name": "profilePage",
    "location": "profilePage.html"
}, {
    "name": "zzsearchPage",
    "location": "zzsearchPage.html"
}, {
    "name": "itemEditPage",
    "location": "itemEditPage.html"
}, {
    "name": "zzproprietorStatPage",
    "location": "zzproprietorStatPage.html"
}, {
    "name": "zzdetailedReviewPage",
    "location": "zzdetailedReviewPage.html"
}, {
    "name": "selectionHistoryPage",
    "location": "selectionHistoryPage.html"
}, {
    "name": "operationsRestaurantPage",
    "location": "operationsRestaurantPage.html"
}, {
    "name": "itemManagePage",
    "location": "itemManagePage.html"
}, {
    "name": "proprietorStartPage",
    "location": "proprietorStartPage.html"
}, {
    "name": "orderHistoryPage",
    "location": "orderHistoryPage.html"
}, {
    "name": "selectedPage",
    "location": "selectedPage.html"
}, {
    "name": "faqPage",
    "location": "faqPage.html"
}, {
    "name": "zzratingInfoPage",
    "location": "zzratingInfoPage.html"
}, {
    "name": "zztimeRangePage",
    "location": "zztimeRangePage.html"
}, {
    "name": "zzscannerPage",
    "location": "zzscannerPage.html"
}, {
    "name": "zzCSStestPage",
    "location": "zzCSStestPage.html"
}, {
    "name": "menuHistoryPage",
    "location": "menuHistoryPage.html"
}, {
    "name": "zzmenuPage",
    "location": "zzmenuPage.html"
}, {
    "name": "zzitemInventoryPage",
    "location": "zzitemInventoryPage.html"
}, {
    "name": "zzalertPage",
    "location": "zzalertPage.html"
}];

function menuPage_v2_js() {
    /* Object & array with components "name-to-id" mapping */
    var n2id_buf = {
        'navigateButton': 'menuPage_v2_navigateButton',
        'name': 'menuPage_v2_name',
        'profileSearchGrid': 'menuPage_v2_profileSearchGrid',
        'profileLabelCell': 'menuPage_v2_profileLabelCell',
        'profileToggleCell': 'menuPage_v2_profileToggleCell',
        'searchLabelCell': 'menuPage_v2_searchLabelCell',
        'searchButtonCell': 'menuPage_v2_searchButtonCell',
        'expand_collapse_all_container': 'menuPage_v2_expand_collapse_all_container',
        'menuHierarchy_div': 'menuPage_v2_menuHierarchy_div',
        'footerGrid': 'menuPage_v2_footerGrid',
        'selectedCell': 'menuPage_v2_selectedCell',
        'selectedButton': 'menuPage_v2_selectedButton',
        'callServerCell': 'menuPage_v2_callServerCell',
        'ownerInfoCell': 'menuPage_v2_ownerInfoCell',
        'ownerInfoButton': 'menuPage_v2_ownerInfoButton',
        'touCell': 'menuPage_v2_touCell',
        'mobilegridcell_24': 'menuPage_v2_mobilegridcell_24',
        'mobilegridcell_25': 'menuPage_v2_mobilegridcell_25',
        'categoryAddLabel': 'menuPage_v2_categoryAddLabel',
        'headingAddField': 'menuPage_v2_headingAddField',
        'headerDescriptionField': 'menuPage_v2_headerDescriptionField',
        'categoryParentLabel': 'menuPage_v2_categoryParentLabel',
        'headingExampleLabel1': 'menuPage_v2_headingExampleLabel1',
        'headingExampleLabel2': 'menuPage_v2_headingExampleLabel2',
        'headingExampleLabel3': 'menuPage_v2_headingExampleLabel3',
        'headingParentSelect': 'menuPage_v2_headingParentSelect',
        'headingParentSelect-0': 'menuPage_v2_headingParentSelect-0',
        'headingButtonGrid': 'menuPage_v2_headingButtonGrid',
        'headingSaveCell': 'menuPage_v2_headingSaveCell',
        'headingAddSaveButton': 'menuPage_v2_headingAddSaveButton',
        'headingCancelCell': 'menuPage_v2_headingCancelCell',
        'headingCancelButton': 'menuPage_v2_headingCancelButton',
        'categoryEditLabel': 'menuPage_v2_categoryEditLabel',
        'mobiletextinput_22': 'menuPage_v2_mobiletextinput_22',
        'categoryParentEditLabel': 'menuPage_v2_categoryParentEditLabel',
        'categoryParentEditButton': 'menuPage_v2_categoryParentEditButton',
        'categoryParentEditButton-0': 'menuPage_v2_categoryParentEditButton-0',
        'categoryButtonGrid': 'menuPage_v2_categoryButtonGrid',
        'categorySaveCell': 'menuPage_v2_categorySaveCell',
        'categoryEditSaveButton': 'menuPage_v2_categoryEditSaveButton',
        'categoryCancelCell': 'menuPage_v2_categoryCancelCell',
        'categoryCancelButton': 'menuPage_v2_categoryCancelButton',
        'itemIsInOrderLabel': 'menuPage_v2_itemIsInOrderLabel',
        'addtoOrderLabel': 'menuPage_v2_addtoOrderLabel',
        'labelStandard': 'menuPage_v2_labelStandard',
        'wishListNote': 'menuPage_v2_wishListNote',
        'wishlistButtonGrid': 'menuPage_v2_wishlistButtonGrid',
        'wishlistSaveCell': 'menuPage_v2_wishlistSaveCell',
        'closePopupButton': 'menuPage_v2_closePopupButton',
        'mobilegridcell_28': 'menuPage_v2_mobilegridcell_28',
        'wishlistCancelButton': 'menuPage_v2_wishlistCancelButton',
        'wishlistConfirmLabel': 'menuPage_v2_wishlistConfirmLabel',
        'wishListContainsItemLabel': 'menuPage_v2_wishListContainsItemLabel',
        'loginGotoLabel': 'menuPage_v2_loginGotoLabel',
        'loginGotoButtonGrid': 'menuPage_v2_loginGotoButtonGrid',
        'loginGotoCell': 'menuPage_v2_loginGotoCell',
        'loginGotoButton': 'menuPage_v2_loginGotoButton',
        'loginGotoCancelCell': 'menuPage_v2_loginGotoCancelCell',
        'loginGotoCancelButton': 'menuPage_v2_loginGotoCancelButton',
        'zeroItemsClosePopupButton': 'menuPage_v2_zeroItemsClosePopupButton',
        'zeroItemsPopupLabel': 'menuPage_v2_zeroItemsPopupLabel'
    };
    if ("n2id" in window && window.n2id !== undefined) {
        $.extend(n2id, n2id_buf);
    } else {
        window.n2id = n2id_buf;
    }
    /*
     * Nonvisual components
     */
    Apperyio.mappings = Apperyio.mappings || {};
    Apperyio.mappings["menuPage_v2_menuPage_v2_onload_mapping_3"] = {
        "homeScreen": "menuPage_v2",
        "directions": []
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_list_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": [
            {
                "to_name": "menuPage_v2_list_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}"
                    },
                    "parameters": {
                        "include": "vendor,vendor.state,vendor.country,headingParent,headingParent.vendor,headingParent.vendor.state,headingParent.vendor.country,headingParent.headingParent,headingParent.headingParent.vendor,headingParent.headingParent.vendor.state,headingParent.headingParent.vendor.country,headingParent.headingParent.headingParent,headingParent.headingParent.headingParent.vendor,headingParent.headingParent.headingParent.vendor.state,headingParent.headingParent.headingParent.vendor.country,headingParent.headingParent.headingParent.headingParent,headingParent.headingParent.headingParent.headingParent.vendor,headingParent.headingParent.headingParent.headingParent.headingParent",
                        "sort": "order",
                        "where": " {\"vendor\": {\"$inQuery\" : { \"_id\": \"{vendor_id}\"}}}",
                        "limit": "1500"
                    },
                    "body": null
                },
                "mappings": []
            }
        ]
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_list_service_onsuccess_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": [
            {
                "from_name": "menuPage_v2_list_service",
                "from_type": "SERVICE_RESPONSE",
                "to_name": "menuHeading",
                "to_type": "SESSION_STORAGE",
                "mappings": [
                    {
                        "source": "$['body'][i]['headingParent']['_id']",
                        "target": "$[i]['parent_id']"
                    },
                    {
                        "source": "$['body'][i]['_id']",
                        "target": "$[i]['id']"
                    },
                    {
                        "source": "$['body'][i]['heading']",
                        "target": "$[i]['heading']"
                    },
                    {
                        "source": "$['body'][i]['headingDescription']",
                        "target": "$[i]['description']"
                    },
                    {
                        "source": "$['body'][i]['order']",
                        "target": "$[i]['order']"
                    },
                    {
                        "source": "$['body'][i]['hidden']",
                        "target": "$[i]['isHidden']"
                    },
                    {
                        "source": "$['body'][i]['price']",
                        "target": "$[i]['price']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_list_service_onsuccess_mapping_2"] = {
        "homeScreen": "menuPage_v2",
        "directions": []
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_mapService_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": [
            {
                "to_name": "menuPage_v2_mapService",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "data": null
                },
                "mappings": []
            }
        ]
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_mapService_onsuccess_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": [
            {
                "from_name": "currentItem",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2",
                "to_type": "UI",
                "mappings": [
                    {
                        "source": "$['heading']",
                        "target": "$['headingAddField:text']"
                    },
                    {
                        "source": "$['description']",
                        "target": "$['headerDescriptionField:text']"
                    }
                ]
            },
            {
                "from_name": "menuHierarchyList",
                "from_type": "VARIABLE_STORAGE",
                "to_name": "menuPage_v2",
                "to_type": "UI",
                "mappings": [
                    {
                        "source": "$[i]",
                        "target": "$['headingParentSelect-0']"
                    },
                    {
                        "source": "$[i]['id']",
                        "target": "$['headingParentSelect-0:value']"
                    },
                    {
                        "source": "$[i]['heading']",
                        "target": "$['headingParentSelect-0:label']"
                    }
                ]
            }
        ]
    };

    Apperyio.mappings["menuPage_v2_menuPage_v2_id_item_query_service_onsuccess_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": [
            {
                "from_name": "menuPage_v2_id_item_query_service",
                "from_type": "SERVICE_RESPONSE",
                "to_name": "menuItemsList",
                "to_type": "SESSION_STORAGE",
                "mappings": [
                    {
                        "source": "$['body'][i]['_id']",
                        "target": "$[i]['id']"
                    },
                    {
                        "source": "$['body'][i]['name']",
                        "target": "$[i]['heading']"
                    },
                    {
                        "source": "$['body'][i]['heading']['_id']",
                        "target": "$[i]['parent_id']"
                    },
                    {
                        "source": "$['body'][i]['price']",
                        "target_transformation": function(value) {
                            console.log("value", value)
                        },
                        "target": "$[i]['price']"
                    },
                    {
                        "source": "$['body'][i]['order']",
                        "target": "$[i]['order']"
                    },
                    {
                        "source": "$['body'][i]['_id']",
                        "target_transformation": function(value) {
                            return true;
                        },
                        "target": "$[i]['isItem']"
                    },
                    {
                        "source": "$['body'][i]['hidden']",
                        "target": "$[i]['isHidden']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_id_item_query_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": [
            {
                "to_name": "menuPage_v2_id_item_query_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}"
                    },
                    "parameters": {
                        "where": " {\"vendor_lk\": {\"$inQuery\" : { \"_id\": \"{vendor_id}\"}}}",
                        "include": "cuisine_lk,ingredientMain_lk,ingredientMain_lk.category_lk,ingredientHidden_lk,ingredientHidden_lk.category_lk,ingredientFeatured_lk,ingredientFeatured_lk.category_lk,rating_lk,rating_lk.item,rating_lk.item.cuisine_lk,rating_lk.item.ingredientMain_lk,rating_lk.item.ingredientMain_lk.category_lk,rating_lk.item.ingredientHidden_lk,rating_lk.item.ingredientFeatured_lk,rating_lk.item.rating_lk,rating_lk.item.vendor_lk,rating_lk.item.heading,rating_lk.user,rating_lk.user.status,vendor_lk,vendor_lk.state,vendor_lk.country,heading,heading.vendor,heading.vendor.state,heading.vendor.country,heading.headingParent",
                        "sort": "order",
                        "limit": "1500"
                    },
                    "body": null
                },
                "mappings": [
                    {
                        "target_transformation": function(value) {
                            return {
                                "vendor_lk": {
                                    "$inQuery": {
                                        "_id": projectMdb1_settings.vendor_id
                                    }
                                }
                            };
                        },
                        "target": "$['parameters']['where']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_orderItem_create_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": [
            {
                "from_name": "selectedItem",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2_orderItem_create_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "quantity": 1,
                        "item": {
                            "collName": "item"
                        },
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "user": {
                            "callName": "_users"
                        }
                    }
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['body']['item']['_id']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_wishlist_create_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": [
            {
                "from_name": "selectedItem",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2_wishlist_create_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "item": {
                            "collName": "item"
                        },
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "user": {
                            "collName": "_users"
                        }
                    }
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['body']['item']['_id']"
                    }
                ]
            },
            {
                "from_name": "menuPage_v2",
                "from_type": "UI",
                "to_name": "menuPage_v2_wishlist_create_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "item": {
                            "collName": "item"
                        },
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "user": {
                            "collName": "_users"
                        }
                    }
                },
                "mappings": [
                    {
                        "source": "$['wishListNote:text']",
                        "target": "$['body']['notes']"
                    }
                ]
            },
            {
                "from_name": "userId",
                "from_type": "LOCAL_STORAGE",
                "to_name": "menuPage_v2_wishlist_create_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "item": {
                            "collName": "item"
                        },
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "user": {
                            "collName": "_users"
                        }
                    }
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['body']['user']['_id']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_wishlist_query_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": [
            {
                "from_name": "selectedItem",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2_wishlist_query_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "X-Appery-Session-Token": "{session_token}"
                    },
                    "parameters": {
                        "include": "item,item.cuisine_lk,item.ingredientMain_lk,item.ingredientMain_lk.category_lk,item.ingredientHidden_lk,item.ingredientHidden_lk.category_lk,item.ingredientFeatured_lk,item.ingredientFeatured_lk.category_lk,item.rating_lk,item.rating_lk.item,item.rating_lk.item.cuisine_lk,item.rating_lk.item.ingredientMain_lk,item.rating_lk.item.ingredientHidden_lk,item.rating_lk.item.ingredientFeatured_lk,item.rating_lk.item.rating_lk,item.rating_lk.item.vendor_lk,item.rating_lk.item.heading,item.rating_lk.user,item.rating_lk.user.status,item.rating_lk.user.vendor_lk,item.vendor_lk,item.vendor_lk.state,item.vendor_lk.country,item.heading,item.heading.vendor,item.heading.headingParent,item.heading.owner_lk",
                        "limit": "1500"
                    },
                    "body": null
                },
                "mappings": [
                    {
                        "source": "$",
                        "target_transformation": function(value) {
                            return {
                                "item": {
                                    "$inQuery": {
                                        "_id": value
                                    }
                                }
                            };
                        },
                        "target": "$['parameters']['where']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_getMenuHierarchy_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": [
            {
                "from_name": "vendorId",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2_getMenuHierarchy_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "Content-Type": "application/json"
                    },
                    "parameters": {
                        "vendorId": "{vendor_id}",
                        "onlyHeading": "false",
                        "profileUseToggle": "off",
                        "hideEmpty": "on"
                    },
                    "body": null
                },
                "mappings": [
                    {
                        "source": "$",
                        "target_transformation": function(value) {
                            // var vid = value;//storageGet('shared_menu_vendor_id');
                            // if (!vid) {
                            //     storageGet('shared_menu_vendor_id');
                            // }
                            return value;
                        },
                        "target": "$['parameters']['vendorId']"
                    }
                ]
            },
            {
                "from_name": "sessionToken",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2_getMenuHierarchy_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "Content-Type": "application/json"
                    },
                    "parameters": {
                        "vendorId": "{vendor_id}",
                        "onlyHeading": "false",
                        "profileUseToggle": "off",
                        "hideEmpty": "on"
                    },
                    "body": null
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['headers']['X-Appery-Session-Token']"
                    }
                ]
            },
            {
                "to_name": "menuPage_v2_getMenuHierarchy_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "Content-Type": "application/json"
                    },
                    "parameters": {
                        "vendorId": "{vendor_id}",
                        "onlyHeading": "false",
                        "profileUseToggle": "off",
                        "hideEmpty": "on"
                    },
                    "body": null
                },
                "mappings": [
                    {
                        "target_transformation": function(value) {
                            return $("input[name=pref-value]")[0].checked === true ? "on" : "off";
                        },
                        "target": "$['parameters']['profileUseToggle']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_createSelected_service_onsuccess_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": []
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_createSelected_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": [
            {
                "from_name": "currentItem",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2_createSelected_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "itemID": {
                            "collName": "item"
                        },
                        "current": true,
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "userID": {
                            "collName": "_users"
                        },
                        "vendor_lk": {
                            "collName": "vendor"
                        },
                        "fromPage": "menuPage"
                    }
                },
                "mappings": [
                    {
                        "source": "$['id']",
                        "target": "$['body']['itemID']['_id']"
                    },
                    {
                        "source": "$['heading']",
                        "target": "$['body']['itemName']"
                    }
                ]
            },
            {
                "from_name": "userId",
                "from_type": "LOCAL_STORAGE",
                "to_name": "menuPage_v2_createSelected_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "itemID": {
                            "collName": "item"
                        },
                        "current": true,
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "userID": {
                            "collName": "_users"
                        },
                        "vendor_lk": {
                            "collName": "vendor"
                        },
                        "fromPage": "menuPage"
                    }
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['body']['userID']['_id']"
                    }
                ]
            },
            {
                "from_name": "currentVendor",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2_createSelected_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "itemID": {
                            "collName": "item"
                        },
                        "current": true,
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "userID": {
                            "collName": "_users"
                        },
                        "vendor_lk": {
                            "collName": "vendor"
                        },
                        "fromPage": "menuPage"
                    }
                },
                "mappings": [
                    {
                        "source": "$['id']",
                        "target": "$['body']['vendor_lk']['_id']"
                    }
                ]
            },
            {
                "from_name": "sessionToken",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2_createSelected_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "itemID": {
                            "collName": "item"
                        },
                        "current": true,
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "userID": {
                            "collName": "_users"
                        },
                        "vendor_lk": {
                            "collName": "vendor"
                        },
                        "fromPage": "menuPage"
                    }
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['headers']['X-Appery-Session-Token']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_setMenuHistory_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": [
            {
                "from_name": "userId",
                "from_type": "LOCAL_STORAGE",
                "to_name": "menuPage_v2_setMenuHistory_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "Content-Type": "text/plain"
                    },
                    "parameters": {
                        "user_id": "56dff9d2e4b07fb4837fc810",
                        "vendor_id": "567bc758e4b0efe9f5f7c579"
                    },
                    "body": null
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['parameters']['user_id']"
                    }
                ]
            },
            {
                "from_name": "vendorId",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2_setMenuHistory_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "Content-Type": "text/plain"
                    },
                    "parameters": {
                        "user_id": "56dff9d2e4b07fb4837fc810",
                        "vendor_id": "567bc758e4b0efe9f5f7c579"
                    },
                    "body": null
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['parameters']['vendor_id']"
                    }
                ]
            },
            {
                "from_name": "coords",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2_setMenuHistory_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "Content-Type": "text/plain"
                    },
                    "parameters": {
                        "user_id": "56dff9d2e4b07fb4837fc810",
                        "vendor_id": "567bc758e4b0efe9f5f7c579"
                    },
                    "body": null
                },
                "mappings": [
                    {
                        "source": "$['Latitude']",
                        "target_transformation": function(value) {
                            return storageGet('coords');
                        },
                        "target": "$['parameters']['coords']"
                    },
                    {
                        "source": "$['Longitude']",
                        "target_transformation": function(value) {
                            return storageGet('coords');
                        },
                        "target": "$['parameters']['coords']"
                    }
                ]
            },
            {
                "to_name": "menuPage_v2_setMenuHistory_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "Content-Type": "text/plain"
                    },
                    "parameters": {
                        "user_id": "56dff9d2e4b07fb4837fc810",
                        "vendor_id": "567bc758e4b0efe9f5f7c579"
                    },
                    "body": null
                },
                "mappings": [
                    {
                        "target_transformation": function(value) {
                            return (new Date()).getTime();
                        },
                        "target": "$['parameters']['timestamp']"
                    },
                    {
                        "target_transformation": function(value) {
                            return window.navigator.appCodeName;
                        },
                        "target": "$['parameters']['appCodeName']"
                    },
                    {
                        "target_transformation": function(value) {
                            return window.navigator.platform;
                        },
                        "target": "$['parameters']['platform']"
                    }
                ]
            }
        ]
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_menuViews_create_service_onsuccess_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": []
    };
    Apperyio.mappings["menuPage_v2_menuPage_v2_menuViews_create_service_onbeforesend_mapping_0"] = {
        "homeScreen": "menuPage_v2",
        "directions": [
            {
                "from_name": "sessionToken",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2_menuViews_create_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "userId": {
                            "collName": "_users"
                        },
                        "vendorId": {
                            "collName": "vendor"
                        },
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "isGuestUser": false
                    }
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['headers']['X-Appery-Session-Token']"
                    }
                ]
            },
            {
                "from_name": "userId",
                "from_type": "LOCAL_STORAGE",
                "to_name": "menuPage_v2_menuViews_create_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "userId": {
                            "collName": "_users"
                        },
                        "vendorId": {
                            "collName": "vendor"
                        },
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "isGuestUser": false
                    }
                },
                "mappings": [
                    {
                        "source": "$",
                        "target": "$['body']['userId']['_id']"
                    }
                ]
            },
            {
                "from_name": "currentVendor",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2_menuViews_create_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "userId": {
                            "collName": "_users"
                        },
                        "vendorId": {
                            "collName": "vendor"
                        },
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "isGuestUser": false
                    }
                },
                "mappings": [
                    {
                        "source": "$['id']",
                        "target": "$['body']['vendorId']['_id']"
                    }
                ]
            },
            {
                "from_name": "userName",
                "from_type": "SESSION_STORAGE",
                "to_name": "menuPage_v2_menuViews_create_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "userId": {
                            "collName": "_users"
                        },
                        "vendorId": {
                            "collName": "vendor"
                        },
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "isGuestUser": false
                    }
                },
                "mappings": [
                    {
                        "source": "$",
                        "target_transformation": function(value) {
                            return value == "guest";
                        },
                        "target": "$['body']['isGuestUser']"
                    }
                ]
            },
            {
                "to_name": "menuPage_v2_menuViews_create_service",
                "to_type": "SERVICE_REQUEST",
                "to_default": {
                    "headers": {
                        "X-Appery-Database-Id": "{database_id}",
                        "Content-Type": "application/json"
                    },
                    "parameters": {},
                    "body": {
                        "userId": {
                            "collName": "_users"
                        },
                        "vendorId": {
                            "collName": "vendor"
                        },
                        "acl": {
                            "*": {
                                "write": true,
                                "read": true
                            }
                        },
                        "isGuestUser": false
                    }
                },
                "mappings": [
                    {
                        "target_transformation": function(value) {
                            value._id = value._id === "null" ? Settings.guestUserId : value._id;
                            return value;
                            // return 
                            /*if (value == null){
                                return "";
                            }
                            return value;*/
                        },
                        "target": "$['body']['userId']"
                    }
                ]
            }
        ]
    };
    Apperyio.datasources = Apperyio.datasources || {};
    window.menuPage_v2_list_service = Apperyio.datasources.menuPage_v2_list_service = new Apperyio.DataSource(projectMdb1_menuHeading_list_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_list_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_list_service_onsuccess_mapping_0"]);
            makeHierarchy();
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_v2_mapService = Apperyio.datasources.menuPage_v2_mapService = new Apperyio.DataSource(mapMenuHedingItemGenericService, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_mapService_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_mapService_onsuccess_mapping_0"]);
            //console.log(currentItem);
            Apperyio("headingParentSelect").val(currentItem.parent_id).refresh();;
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_v2_id_item_query_service = Apperyio.datasources.menuPage_v2_id_item_query_service = new Apperyio.DataSource(projectMdb1_item_query_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_id_item_query_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_id_item_query_service_onsuccess_mapping_0"]);
            try {
                menuPage_v2_list_service.execute({});
            } catch (e) {
                console.error(e);
                hideSpinner();
            };
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_v2_orderItem_create_service = Apperyio.datasources.menuPage_v2_orderItem_create_service = new Apperyio.DataSource(projectMdb1_orderItem_create_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_orderItem_create_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            showPopupWithTimout('addToOrderPopup', addToOrderPopupTime);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_v2_wishlist_create_service = Apperyio.datasources.menuPage_v2_wishlist_create_service = new Apperyio.DataSource(projectMdb1_wishlist_create_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_wishlist_create_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            showPopupWithTimout('wishlistConfirmPopup', wishlistConfirmPopupTime);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_v2_wishlist_query_service = Apperyio.datasources.menuPage_v2_wishlist_query_service = new Apperyio.DataSource(projectMdb1_wishlist_query_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_wishlist_query_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            if (!data.length) {
                Apperyio('wishListPopup').popup('open');
            } else {
                showPopupWithTimout('wishlistContainsItem', wishlistContainsItemTime);
            };
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_v2_getMenuHierarchy_service = Apperyio.datasources.menuPage_v2_getMenuHierarchy_service = new Apperyio.DataSource(getMenuHierarchy_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_getMenuHierarchy_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
            hideSpinner();
            window.menuPage_spinnerNeeded = false;
            console.log('Hide spinner...');;
        },
        "onSuccess": function(data) { //window.menuHierarchyList_v2 = data;
            var stateData = storageGet('menuHierarchyList_state').state;
            for (var i = 0; i < data.length; i++) {
                if (stateData) {
                    var stateEl = stateData[data[i]._id];
                    if (stateEl && stateEl.opened) {
                        data[i].opened = stateEl.opened;
                        data.filter(function(dataEl) {
                            return dataEl.parent && dataEl.parent._id == data[i]._id
                        }).forEach(function(item) {
                            item.visible = true
                        });
                    }
                }
            }
            storageSet('menuHierarchyList', data);
            menuPageBuilder.buildMenu();
        },
        "onError": function(jqXHR, textStatus, errorThrown) {
            logPageError('menuPage_v2', 'menuPage_v2_getMenuHierarchy_service', errorThrown);
            Apperyio.navigateTo('proprietorPage', {
                reverse: false
            });
        }
    });
    window.menuPage_v2_createSelected_service = Apperyio.datasources.menuPage_v2_createSelected_service = new Apperyio.DataSource(projectMdb1_selected_create_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_createSelected_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_createSelected_service_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_v2_setMenuHistory_service = Apperyio.datasources.menuPage_v2_setMenuHistory_service = new Apperyio.DataSource(setMenuHistory_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_setMenuHistory_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {},
        "onError": function(jqXHR, textStatus, errorThrown) {}
    });
    window.menuPage_v2_menuViews_create_service = Apperyio.datasources.menuPage_v2_menuViews_create_service = new Apperyio.DataSource(projectMdb1_menuViews_create_service, {
        "onBeforeSend": function(jqXHR) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_menuViews_create_service_onbeforesend_mapping_0"]);
        },
        "onComplete": function(jqXHR, textStatus) {
        },
        "onSuccess": function(data) {
            Apperyio.processMappingAction(Apperyio.mappings["menuPage_v2_menuPage_v2_menuViews_create_service_onsuccess_mapping_0"]);
        },
        "onError": function(jqXHR, textStatus, errorThrown) {
            alert("err with status: " + textStatus);
        }
    });
    Apperyio.CurrentScreen = 'menuPage_v2';
    _.chain(Apperyio.mappings)
        .filter(function(m) {
            return m.homeScreen === Apperyio.CurrentScreen;
        })
        .each(Apperyio.UIHandler.hideTemplateComponents);
    /*
     * Events and handlers
     */
    // On Load
    var menuPage_v2_onLoad = function() {
        menuPage_v2_elementsExtraJS();
        menuPage_v2_deviceEvents();
        menuPage_v2_windowEvents();
        menuPage_v2_elementsEvents();
    };
    // screen window events
    function menuPage_v2_windowEvents() {
        $('#menuPage_v2').bind('pageshow orientationchange', function() {
            var _page = this;
            adjustContentHeightWithPadding(_page);
        });
        $('#menuPage_v2').on({
            pageshow: function(event) {
                var lastSelectedMenuItem = storageGet('lastSelectedMenuItem');
                storageSet('lastSelectedMenuItem', undefined);
                Apperyio('menuFooter').addClass('fixed-header');
                Apperyio('headingManageHeader').parents('[data-role=header]').addClass('fixed-header');
                initPage();
                if (!isGuest) {
                    menuPage_v2_setMenuHistory_service.execute();
                }
                menuPage_v2_menuViews_create_service.execute({});
                //console.log(Apperyio('vendor-title'));
                //Appery('vendor-title').html(storageGet('currentVendor').menuTagLine || '');
                //console.log(Appery('vendor-title'));
                $("div[name=vendor-title]").html(storageGet('currentVendor').menuTagLine || '')
                $("input[name=pref-value]").change(function() {
                    if (isGuest) {
                        $("input[name=pref-value]")[0].checked = false
                        // $("div[name=pref-value]").prop('checked', false)//.flipswitch('refresh');
                        Apperyio('loginGotoPopup').popup('open');
                    } else {
                        menuPage_v2_getMenuHierarchy_service.execute({});
                    }
                    // $("input[name=pref-value]")[0].checked
                    var listState = storageGet('menuHierarchyList_state');
                    listState.toggled = $("input[name=pref-value]")[0].checked === true ? "on" : "off";
                    if (listState.toggled == 'on') {
                        $("div[name=preferences]").show();
                        var prefs = storageGet('userPrefs');
                        $("div[name=preferences]").text(((prefs == undefined) ? "" : prefs));
                    } else {
                        $("div[name=preferences]").hide();
                    }
                    storageSet('menuHierarchyList_state', listState);
                });
                var mhlist = storageGet('menuHierarchyList');
                if (mhlist && mhlist[0] && mhlist[0].vendor._id == (storageGet('menuHierarchyList_state') || {}).vendor) {
                    ////menuPage_genericMapService.execute({});
                    // if (lastSelectedMenuItem) {
                
                    //     var type_item = lastSelectedMenuItem.split("_");
                    //     var type = type_item[0];
                    //     var item = type_item[1];
                     
                    //     var menuData = storageGet('menuHierarchyList'); 
                    //     // x => x._id == item
                    //     var i = menuData.findIndex(function(x){return x._id == item;});
                        
                    //     if (i > -1) {
                    //         switch (type) {
                    //             case "heart":
                    //                 menuData[i].favorite = true;
                    //                 break;
                                    
                    //             case "wishlist":
                    //                 if (!menuData[i].favorite)
                    //                     menuData[i].wishlist = true;
                    //                 break;
                    //         }
                            
                    //         storageSet('menuHierarchyList', menuData);
                    //     }
                    // }
                    menuPageBuilder.buildMenu();   
                } else { 
                 
                    window.menuPage_spinnerNeeded = true;
                    setTimeout(function() {
                        /* We check this variable to ensure that showSpinner() will not fire after hideSpinner() */
                        if (window.menuPage_spinnerNeeded) {
                            showSpinner({
                                text: "Loading menu",
                                textVisible: true,
                                textonly: false
                            });
                        }
                    }, 300);
                    console.log('Show spinner...');
                    storageSet('menuHierarchyList_state', {
                        vendor: storageGet('currentVendor')._id,
                        toggled: 'off',
                        state: {}
                    });
                    menuPage_v2_getMenuHierarchy_service.execute({});
                }
                var toggled = storageGet('menuHierarchyList_state').toggled;
                Apperyio('profileUseToggle').val(toggled || 'off').flipswitch('refresh');
                if (hideBackButton) {
                   hideBackButton = false;
                       $(".ui-toolbar-back-btn").css("display", "none");
                }
            },
        });
    };
    // device events
    function menuPage_v2_deviceEvents() {
        document.addEventListener("deviceready", function() {
        });
    };
    // screen elements extra js
    function menuPage_v2_elementsExtraJS() {
        // screen (menuPage_v2) extra code
        /* headingAddPopup */
        $("#menuPage_v2_headingAddPopup").popup("option", "positionTo", "window");
        /* headingParentSelect */
        $("#menuPage_v2_headingParentSelect").parent().find("a.ui-btn").attr("tabindex", "5");
        /* categoryEditPopup */
        $("#menuPage_v2_categoryEditPopup").popup("option", "positionTo", "window");
        /* categoryParentEditButton */
        $("#menuPage_v2_categoryParentEditButton").parent().find("a.ui-btn").attr("tabindex", "7");
        /* itemIsInOrderPopup */
        $("#menuPage_v2_itemIsInOrderPopup").popup("option", "positionTo", "window");
        /* addToOrderPopup */
        $("#menuPage_v2_addToOrderPopup").popup("option", "positionTo", "window");
        /* wishListPopup */
        $("#menuPage_v2_wishListPopup").popup("option", "positionTo", "window");
        /* wishlistConfirmPopup */
        $("#menuPage_v2_wishlistConfirmPopup").popup("option", "positionTo", "window");
        /* wishlistContainsItem */
        $("#menuPage_v2_wishlistContainsItem").popup("option", "positionTo", "window");
        /* loginGotoPopup */
        $("#menuPage_v2_loginGotoPopup").popup("option", "positionTo", "window");
        /* zeroItemsPopup */
        $("#menuPage_v2_zeroItemsPopup").popup("option", "positionTo", "window");
    };
    // screen elements handler
    function menuPage_v2_elementsEvents() {
        $(document).on("click", "a :input,a a,a fieldset label", function(event) {
            event.stopPropagation();
        });
        $(document).off("click", '#menuPage_v2_headingManageHeader [name="navigateButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    navigateRB();
                }
            },
        }, '#menuPage_v2_headingManageHeader [name="navigateButton"]');
        $(document).off("click", '#menuPage_v2_menuHeadingContainer [name="expand_collapse_all_container"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    var data = storageGet('menuHierarchyList');
                    if (!data) data = [];
                    var toggle = $(this).attr('toggle');
                    if (toggle) {
                        $(this).removeAttr('toggle');
                        $(".menuPage_v2_mobileimage_29").attr('src', '../img/up-and-down.png');
                        toggle = false;
                    } else {
                        $(this).attr('toggle', 'true');
                        $(".menuPage_v2_mobileimage_29").attr('src', '../img/down-and-up.png');
                        toggle = true;
                    }
                    if (data.length > 0) {
                        data[0].opened = toggle;
                        for (var i = 1; i < data.length; i++) {
                            //handling for top level items
                            if (!data[i].parent && data[i].isItem) {
                                data[i].opened = true;
                                data[i].visible = true;
                            } else {
                                data[i].opened = toggle;
                                data[i].visible = toggle;
                            }
                        }
                    }
                    storageSet('menuHierarchyList', data);
                    menuPageBuilder.buildMenu();
                }
            },
        }, '#menuPage_v2_menuHeadingContainer [name="expand_collapse_all_container"]');
        $(document).off("click", '#menuPage_v2_menuFooter [name="selectedButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio.navigateTo('selectedPage', {
                        reverse: false
                    });
                }
            },
        }, '#menuPage_v2_menuFooter [name="selectedButton"]');
        $(document).off("click", '#menuPage_v2_menuFooter [name="ownerInfoButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio.navigateTo('proprietorPage', {
                        transition: 'flip',
                        reverse: false
                    });
                }
            },
        }, '#menuPage_v2_menuFooter [name="ownerInfoButton"]');
        $(document).off("click", '#menuPage_v2_headingAddPopup [name="headingCancelButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio('addToOrderPopup').popup('close');
                }
            },
        }, '#menuPage_v2_headingAddPopup [name="headingCancelButton"]');
        $(document).off("click", '#menuPage_v2_categoryEditPopup [name="categoryCancelButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio('addToOrderPopup').popup('close');
                }
            },
        }, '#menuPage_v2_categoryEditPopup [name="categoryCancelButton"]');
        $(document).off("click", '#menuPage_v2_wishListPopup [name="closePopupButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio('wishListPopup').popup('close');
                    try {
                        menuPage_v2_wishlist_create_service.execute({});
                    } catch (e) {
                        console.error(e);
                        hideSpinner();
                    };
                }
            },
        }, '#menuPage_v2_wishListPopup [name="closePopupButton"]');
        $(document).off("click", '#menuPage_v2_wishListPopup [name="wishlistCancelButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio('addToOrderPopup').popup('close');
                }
            },
        }, '#menuPage_v2_wishListPopup [name="wishlistCancelButton"]');
        $(document).off("click", '#menuPage_v2_loginGotoPopup [name="loginGotoButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio('loginGotoPopup').popup('close');
                    setTimeout(function() {
                        window.location = 'startScreen.html';
                    }, 0);
                }
            },
        }, '#menuPage_v2_loginGotoPopup [name="loginGotoButton"]');
        $(document).off("click", '#menuPage_v2_loginGotoPopup [name="loginGotoCancelButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio('loginGotoPopup').popup('close');
                }
            },
        }, '#menuPage_v2_loginGotoPopup [name="loginGotoCancelButton"]');
        $(document).off("click", '#menuPage_v2_zeroItemsPopup [name="zeroItemsClosePopupButton"]').on({
            click: function(event) {
                if (!$(this).attr('disabled')) {
                    Apperyio('zeroItemsPopup').popup('close');
                }
            },
        }, '#menuPage_v2_zeroItemsPopup [name="zeroItemsClosePopupButton"]');
    };
    $(document).off("pagebeforeshow", "#menuPage_v2").on("pagebeforeshow", "#menuPage_v2", function(event, ui) {
        Apperyio.CurrentScreen = "menuPage_v2";
        _.chain(Apperyio.mappings)
            .filter(function(m) {
                return m.homeScreen === Apperyio.CurrentScreen;
            })
            .each(Apperyio.UIHandler.hideTemplateComponents);
    });
    menuPage_v2_onLoad();
};
$(document).off("pagecreate", "#menuPage_v2").on("pagecreate", "#menuPage_v2", function(event, ui) {
    Apperyio.processSelectMenu($(this));
    menuPage_v2_js();
});